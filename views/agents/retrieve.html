<!DOCTYPE html>
<html ng-app="crmApp">
  <head>
    <meta charset="utf-8">
    <title>CRM system</title>

    <link rel="stylesheet" href="/jquery-ui-themes-1.11.1/themes/smoothness/jquery-ui.css">
  </head>
  <body>
    <div ng-controller="agentDetailController">
      <h3>Agent Basic Info</h3>
      <ul>
        <li>Agent Name: <%= agent["name"] %></li>
        <li>Agent Phone: <%= agent["phone"] %></li>
        <li>Agent Email: <%= agent["email"] %></li> 
      </ul>
      <button id="edit_agent" value="<%= agent["id"] %>">Edit Agent Basic Info</button>
      <h3>Customers</h3>
      <table>
        <tr>
          <th>Name</th>
          <th>Phone</th>
          <th>Email</th>
          <th>Details</th>
        </tr>
        <% for (var i = 0; i < customers.length;i++) { %>
          <tr>
            <td><%= customers[i]["name"] %></td>
            <td><%= customers[i]["phone"] %></td>
            <td><%= customers[i]["email"] %></td> 
            <td><button class="customer_detail" value="<%= customers[i]["id"] %>" name="<%= agent["id"] %>" >Details</button></td>
          </tr>
        <% } %>
      </table><br />
      <div>
        <button id="create_customer" value="<%= agent["id"] %>">Create New Customer</button>
      </div><br/>
      <button id="back_agents">Go back to Agent list</button>
    </div>
    <script src="/js/jquery-1.11.1.js"></script>
    <script src="/jquery-ui-1.11.1/jquery-ui.js"></script>
    <script src="/js/angular.min.js"></script>
    <script src="/js/agents.js"></script>
    <script src="/js/customers.js"></script>
    <script src="/js/contact_history.js"></script>
  </body>
</html>
